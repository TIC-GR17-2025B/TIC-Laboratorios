---
name: üõ°Ô∏è CI - Guardia de Calidad (Lint, Test, Build)

# ----------------------------------------------------
# Disparador: Se ejecuta solo en los Pull Requests (PRs)
# que intentan fusionar a las ramas de control (develop y main).
# ----------------------------------------------------
on:
  pull_request:
    branches:
      - develop
      - main
    types: [opened, synchronize, reopened] # En apertura, push y reapertura

jobs:
  validate_quality:
    name: üß™ Ejecutar Validaci√≥n
    runs-on: ubuntu-latest
    
    steps:
      # 1. Checkout del C√≥digo
      - name: Checkout Repository
        uses: actions/checkout@v4
        
      # 2. Configuraci√≥n de Node.js y Cach√©
      - name: Setup Node.js Environment
        uses: actions/setup-node@v4
        with:
          node-version: '20.x'
          cache: 'npm' 
          
      # 3. Instalaci√≥n de Dependencias (npm ci garantiza un build reproducible)
      - name: Install Dependencies (npm ci)
        run: npm ci

      # 4. Ejecutar Linter (ESLint o similar)
      - name: Run ESLint Check
        run: npm run lint
        # Requiere el script "lint" en package.json.

      # 5. Ejecutar Pruebas Automatizadas
      - name: Run Automated Tests
        run: npm run test
        # Requiere el script "test" en package.json.

      # 6. Ejecutar Build (Verificaci√≥n de Compilaci√≥n)
      - name: Run Project Build
        run: npm run build
        # Requiere el script "build" en package.json.
