generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

generator client_render {
  provider = "prisma-client-js"
  output   = "../dist/server/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model escenario {
  id_escenario Int        @id @default(autoincrement())
  nombre       String     @db.VarChar
  progreso     progreso[]
}

model estudiante {
  id_estudiante      Int         @id @default(autoincrement())
  codigo_unico       Int         @unique
  primernombre       String      @db.VarChar
  segundo_nombre     String      @db.VarChar
  primer_apellido    String      @db.VarChar
  segundo_apellido   String      @db.VarChar
  correo_electronico String      @unique @db.VarChar
  contrasenia        String      @db.VarChar
  matricula          matricula[]
  progreso           progreso[]
}

model profesor {
  id_profesor        Int     @id @default(autoincrement())
  primernombre       String  @db.VarChar
  segundo_nombre     String  @db.VarChar
  primer_apellido    String  @db.VarChar
  segundo_apellido   String  @db.VarChar
  correo_electronico String  @unique @db.VarChar
  contrasenia        String  @db.VarChar
  curso              curso[]
}

model progreso {
  id_progreso   Int        @id @default(autoincrement())
  id_estudiante Int
  id_escenario  Int
  terminado     Boolean?   @default(false)
  tiempo        Float?
  escenario     escenario  @relation(fields: [id_escenario], references: [id_escenario], onDelete: NoAction, onUpdate: NoAction, map: "fk_progreso_escenario")
  estudiante    estudiante @relation(fields: [id_estudiante], references: [id_estudiante], onDelete: NoAction, onUpdate: NoAction, map: "fk_progreso_estudiante")
}

model curso {
  id_curso    Int         @id @default(autoincrement())
  id_profesor Int
  nombre      String      @db.VarChar
  profesor    profesor    @relation(fields: [id_profesor], references: [id_profesor], onDelete: NoAction, onUpdate: NoAction, map: "fk_curso_profesor")
  matricula   matricula[]
}

model matricula {
  id_matricula  Int        @id @default(autoincrement())
  id_curso      Int
  id_estudiante Int
  fecha         DateTime   @default(dbgenerated("CURRENT_DATE")) @db.Date
  curso         curso      @relation(fields: [id_curso], references: [id_curso], onDelete: NoAction, onUpdate: NoAction, map: "fk_matricula_curso")
  estudiante    estudiante @relation(fields: [id_estudiante], references: [id_estudiante], onDelete: NoAction, onUpdate: NoAction, map: "fk_matricula_estudiante")
}
